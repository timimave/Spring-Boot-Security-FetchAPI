<div th:fragment="users-table">
<div class="container">
  <div class="table-responsive">
    <h4>All users</h4>
    <table class="table table-striped table-bordered table-hover">
      <thead>
      <tr>
        <th>ID</th>
        <th>LogIn</th>
        <th>Name</th>
        <th>LastName</th>
        <th>Is learning Java?</th>
        <th>Role</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
      </thead>
      <tbody>

      <div th:each="user : ${users}">
        <tr>
          <td th:utext="${user.getId()}">user</td>
          <td th:utext="${user.getUsername()}">user</td>
          <td th:utext="${user.getName()}">user</td>
          <td th:utext="${user.getLastname()}">VALUE</td>
          <td th:utext="${user.getPersonWhoStudiesJava()}">VALUE</td>
          <td th:utext="${user.getRoles()}">user</td>

          <td>
            <a type="button" class="btn btn-primary" th:href="${'#editUser' + user.id}"
               data-toggle="modal">Edit</a>
          </td>

          <!--Начало Модальное окно изменения пользователя-->
          <div class="modal fade"  th:id="${'editUser'+ user.id}"  tabindex="-1" role="dialog"  aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalCenteredLabel">Edit user</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>

                <div class="modal-body">

                  <!--         Начало Тело Модальной-->
                  <form th:method="PUT" th:action= "@{/admin/{id}/editUser(id=${user.id})}" th:object="${user}" >

                    <div class="form-group text-center">
                      <label class="font-weight-bold justify-content-end" for="id">ID </label>
                      <input th:name="id" th:type="text" class="form-control" th:value="${user.id}" id="id" readonly/>
                    </div>

                    <input type="hidden" th:name="id" th:value="${user.id}" id="userId"/>


                    <div class="form-group text-center">
                      <label class="font-weight-bold justify-content-end" for="login">Login </label>
                      <input th:name="username" th:type="text" class="form-control" th:value="${user.username}" id="login" />
                    </div>

                    <div class="form-group text-center">
                      <label class="font-weight-bold justify-content-end" for="name">Name</label>
                      <input th:name="name" th:type="text" class="form-control" th:value="${user.name}" id="name"/>
                    </div>

                    <div class="form-group text-center">
                      <label class="font-weight-bold justify-content-end" for="lastname">Last name</label>
                      <input th:name="lastname" th:type="text" class="form-control" th:value="${user.lastname}" id="lastname"/>
                    </div>

                    <div class="form-group text-center">
                      <label class="font-weight-bold justify-content-end" for="personWhoStudiesJava">Is learning Java?</label>
                      <input th:name="personWhoStudiesJava" th:type="text" class="form-control" th:value="${user.personWhoStudiesJava}" id="personWhoStudiesJava"/>
                    </div>

                    <div class="form-group text-center">
                      <label class="font-weight-bold justify-content-end" for="password">Password</label>
                      <input th:name="password" th:type="password" class="form-control" th:value="${user.password}"
                             autocomplete="new-password" id="password"/>
                    </div>



                    <label class="row font-weight-bold justify-content-center" >Role</label>


                    <label>
                      <select multiple class="form-control" size="2" name="*{roles}" th:field="*{roles}">
                        <option th:each="role : ${roleList}"
                                th:value="${role.id}"
                                th:selected="${user.roles.contains(role)}"
                                th:text="${role.getNoPrefix()}">

                        </option>
                      </select>
                    </label>

                    <!-- Конец тела окна-->

                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Edit</button>
                    </div>

                  </form>
                </div>
              </div>
            </div>
          </div>
          <!--Конец Модальное окно изменения пользователя-->
          <!--                                            Начало кнопки удаления User`a в таблице-->
          <td>
            <a type="button" class="btn btn-danger" th:href="${'#delete' + user.id}"
               data-toggle="modal">Delete</a>
          </td>
          <!--          Конец кнопки удаления User`a в таблице-->

          <!--Начало Модальное окно удаления пользователя-->
          <div class="modal fade"  th:id="${'delete'+ user.id}"  tabindex="-1" role="dialog"  aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalCenteredLabel_delete">Delete user</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">

                  <!--                          Начало Тело Модальной-->
                  <form th:method="DELETE" th:action= "@{/admin/{id}/delete(id=${user.id})}" th:object="${user}"  >


                    <div class="form-group">
                      <label class="row font-weight-bold justify-content-center" for="id">ID </label>
                      <label for="id_delete"></label><input th:name="id" th:type="text" class="form-control"
                                                            th:value="${user.id}" id="id_delete" readonly/>
                    </div>

                    <div class="form-group">
                      <label class="row font-weight-bold justify-content-center" for="login">Login</label>
                      <label for="login_delete"></label><input th:name="username" th:type="text"
                                                               class="form-control"
                                                               th:value="${user.username}" id="login_delete"
                                                               readonly/>
                    </div>

                    <div class="form-group">
                      <label class="row font-weight-bold justify-content-center" for="name">Name</label>
                      <label for="name_delete"></label><input th:name="name" th:type="text"
                                                              class="form-control" th:value="${user.name}"
                                                              id="name_delete" readonly/>
                    </div>

                    <div class="form-group">
                      <label class="row font-weight-bold justify-content-center" for="lastname">Last name</label>
                      <label for="lastname_delete"></label>
                      <label for="lastname_delete"></label><input th:name="lastname" th:type="text"
                                                                  class="form-control"
                                                                  th:value="${user.lastname}"
                                                                  id="lastname_delete" readonly/>
                    </div>

                    <div class="form-group">
                      <label class="row font-weight-bold justify-content-center" for="personWhoStudiesJava">Is
                        learning Java?</label>
                      <label for="personWhoStudiesJava_delete"></label><input th:name="personWhoStudiesJava"
                                                                              th:type="text"
                                                                              class="form-control"
                                                                              th:value="${user.personWhoStudiesJava}"
                                                                              id="personWhoStudiesJava_delete"
                                                                              readonly/>
                    </div>

                    <div class="form-group">
                      <label class="row font-weight-bold justify-content-center"
                             for="password">Password</label>
                      <label for="password_delete"></label><input th:name="password" th:type="text"
                                                                  class="form-control"
                                                                  th:value="${user.password}"
                                                                  id="password_delete" readonly/>
                    </div>

                    <label class="row font-weight-bold justify-content-center">Role</label>
                    <label for="roles_delete"></label><label for="roles_delete"></label><select multiple
                                                                                                class="form-control"
                                                                                                size="2"
                                                                                                id="roles_delete"
                                                                                                name="roles"
                                                                                                readonly>

                    <option
                        th:each="roles : ${roleList}"
                        th:text="${roles.getNoPrefix()}"
                        th:value="${roles.id}"
                        th:selected="${user.roles.contains(roles)}"
                    ></option>
                  </select>


                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-danger">Delete</button>
                    </div>
                  </form>
                  <!--       Конец тела окна-->
                </div>
              </div>
            </div>
          </div>
          <!--Конец Модальное окно изменения пользователя-->

        </tr>
      </div>
      </tbody>
    </table>
  </div>
</div>
</div>


